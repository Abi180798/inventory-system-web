(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8085],{61899:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/app/archive",function(){return i(96694)}])},92787:function(e,n,i){"use strict";i.d(n,{$G:function(){return a},GK:function(){return t},cy:function(){return l},iV:function(){return r}});let t="Are you sure want to submit this data?",l=e=>"Error! Can't ".concat(e," data?"),a="Are you sure want to delete this data?",r="This will delete the data permanently and you can not undo this action. Please check carefully."},96268:function(e,n,i){"use strict";i.d(n,{n:function(){return t}});let t={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"1px solid #000",borderRadius:1,boxShadow:24,p:4}},3802:function(e,n,i){"use strict";var t=i(85893),l=i(67294),a=i(11163),r=i(24505);n.Z=e=>{var n;let{children:i}=e,s=null===(n=(0,r.C)(e=>e).auth.data)||void 0===n?void 0:n.data,{push:d}=(0,a.useRouter)();return(0,l.useEffect)(()=>{s||d("/")},[s]),(0,t.jsx)(t.Fragment,{children:i})}},96694:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return G}});var t=i(85893),l=i(67294),a=i(87357),r=i(69417),s=i(86886),d=i(15861),o=i(88409),c=i(40044),u=i(59791),h=i(98456),x=i(50135),j=i(94054),p=i(47312),g=i(18360),m=i(22224),f=i(90629),Z=i(93946),v=i(7906),b=i(72882),y=i(53184),S=i(295),C=i(74094),k=i(27060),P=i(70519);function w(e){let{data:n,columns:i,renderSubComponent:r,getRowCanExpand:s,filter:o,handleChangePage:c,handleChangeRowsPerPage:u,handleSelection:h,totalCount:x,defSort:j,tableName:p,hideSearch:g,isEmptyHide:m,hideColumns:f}=e,[Z,w]=(0,l.useState)({}),[z,A]=(0,l.useState)(j?[j]:[]),[N,I]=(0,l.useState)({}),[_,R]=(0,l.useState)(!1),K=(0,C.b7)({data:n,columns:i,state:{rowSelection:Z,sorting:z,expanded:N,columnVisibility:f&&f},enableRowSelection:!0,manualPagination:!0,manualSorting:!!o,onRowSelectionChange:w,onSortingChange:A,onExpandedChange:I,getRowCanExpand:s,getCoreRowModel:(0,k.sC)(),getPaginationRowModel:(0,k.G_)(),getSortedRowModel:(0,k.tj)(),getExpandedRowModel:(0,k.rV)(),debugTable:!1});return(0,l.useEffect)(()=>{h&&h(Object.keys(Z).map(e=>null==n?void 0:n.find((n,i)=>i===Number(e))))},[Z]),(0,t.jsxs)("div",{style:{overflow:"auto"},children:[n.length>0?(0,t.jsx)(b.Z,{sx:{maxHeight:440},children:(0,t.jsxs)(v.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,t.jsx)(y.Z,{children:K.getHeaderGroups().map(e=>(0,t.jsx)("tr",{children:e.headers.map(e=>{var n;return(0,t.jsx)("th",{style:{width:150!==e.getSize()?e.getSize():void 0},colSpan:e.colSpan,children:e.isPlaceholder?null:(0,t.jsxs)("div",{style:{cursor:e.column.getCanSort()?"pointer":"default",userSelect:e.column.getCanSort()?"none":"inherit",display:"flex",justifyContent:"Action"===e.id?"center":"space-between",alignItems:"center",margin:5,whiteSpace:"nowrap",width:150!==e.getSize()?e.getSize():void 0},onClick:e.column.getToggleSortingHandler(),children:[(0,C.ie)(e.column.columnDef.header,e.getContext()),null!==(n=({})[e.column.getIsSorted()])&&void 0!==n?n:null]})},e.id)})},e.id))}),(0,t.jsx)(S.Z,{children:K.getRowModel().rows.map(e=>(0,t.jsxs)(l.Fragment,{children:[(0,t.jsx)("tr",{children:e.getVisibleCells().map(e=>_?(0,t.jsx)("td",{children:(0,t.jsx)("div",{})},e.id):(0,t.jsx)("td",{style:{padding:5},children:(0,C.ie)(e.column.columnDef.cell,e.getContext())},e.id))}),e.getIsExpanded()&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:e.getVisibleCells().length,style:{padding:0},children:r?r({row:e}):null})})]},e.id))})]})}):m?"-":(0,t.jsx)(a.Z,{children:(0,t.jsx)(a.Z,{className:"content-center",children:(0,t.jsxs)(a.Z,{sx:{height:200,p:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[(0,t.jsx)(d.Z,{variant:"h5",sx:{mb:1,fontSize:"1.5rem !important"},children:"Data Not Found ⚠️"}),(0,t.jsx)(d.Z,{variant:"body2",children:"We couldn′t find the data you are looking for."})]})})}),o&&n.length>0&&(0,t.jsx)(P.Z,{rowsPerPageOptions:[10,25,100],component:"div",count:x||0,rowsPerPage:o.limit,page:o.page-1,onPageChange:c,onRowsPerPageChange:u})]})}var z=i(23246),A=i(5368),N=i(22875),I=i(33563),_=i(22284),R=i(66448),K=i(23279),T=i.n(K),E=i(25841),M=i(24505),D=i(10737),F=i(11163),V=i(92787),W=i(96268),H=i(3802);function O(e){let{children:n,value:i,index:l,...r}=e;return(0,t.jsx)("div",{role:"tabpanel",hidden:i!==l,id:"simple-tabpanel-".concat(l),"aria-labelledby":"simple-tab-".concat(l),...r,children:i===l&&(0,t.jsx)(a.Z,{sx:{p:3},children:(0,t.jsx)(d.Z,{children:n})})})}var G=()=>{let[e,n]=(0,l.useState)(0);return(0,t.jsx)(H.Z,{children:(0,t.jsxs)(s.ZP,{container:!0,spacing:6,children:[(0,t.jsx)(s.ZP,{item:!0,xs:12,sx:{paddingBottom:4},children:(0,t.jsx)(d.Z,{variant:"h5",children:"Daftar Arsip Universitas Mataram"})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,sx:{paddingBottom:4},children:(0,t.jsx)(o.Z,{value:e,onChange:(e,i)=>{n(i)},"aria-label":"basic tabs example",children:(0,t.jsx)(c.Z,{label:"SIKURAM",id:"simple-tab-".concat(0),"aria-controls":"simple-tabpanel-".concat(0)})})}),(0,t.jsx)(s.ZP,{item:!0,xs:12,children:(0,t.jsx)(B,{value:e})})]})})};let B=e=>{var n,i;let{value:o}=e,{push:c}=(0,F.useRouter)(),v=(0,M.T)(),[b,y]=(0,l.useState)(!1),S=(0,M.C)(e=>e),C=null===(n=S.auth.data)||void 0===n?void 0:n.data,k=null===(i=S.masterArchive)||void 0===i?void 0:i.filter,[P,K]=(0,E.v_)(),{data:H,isLoading:G,isError:B,isFetching:U}=(0,E.$F)({PeopleId:(null==C?void 0:C.PeopleId)||"",PrimaryRoleId:(null==C?void 0:C.PrimaryRoleId)||"",statarsip:"none",...k},{refetchOnMountOrArgChange:!0}),$=(0,l.useMemo)(()=>H,[H]),[J,X]=(0,l.useState)(),[Q,Y]=(0,l.useState)(!1),q=()=>Y(!Q),ee=e=>c("/app/archive/".concat(e,"/edit")),en=e=>{Y(!0),X(e)},ei=e=>{v((0,D.AK)({fieldName:"filter",fieldValue:{...e}}))},et=(e,n)=>{v((0,D.AK)({fieldName:"filter",fieldValue:{...k,page:n+1}}))},el=e=>{v((0,D.AK)({fieldName:"filter",fieldValue:{...k,limit:parseInt(e.target.value,10)}}))},ea=(0,l.useMemo)(()=>T()(et,1e3),[]),er=(0,l.useMemo)(()=>T()(el,1e3),[]),es=(0,l.useMemo)(()=>T()(ei,1e3),[]),ed=(0,l.useMemo)(()=>[{id:"expander",size:52,header:()=>null,cell:e=>{let{row:n}=e;return n.getCanExpand()?(0,t.jsx)("button",{type:"button",onClick:n.getToggleExpandedHandler(),style:{cursor:"pointer",background:"transparent",border:"none",padding:0,margin:0},children:n.getIsExpanded()?(0,t.jsx)(N.Z,{sx:{fontSize:"1.875rem"}}):(0,t.jsx)(A.Z,{sx:{fontSize:"1.875rem"}})}):null}},{header:"Nomor",accessorKey:"Nomor"},{header:"Hal",accessorKey:"Hal",size:300},{header:"Tanggal",accessorKey:"Tgl",size:100},{header:"Tipe Surat",accessorKey:"NTipe",cell:e=>{let{getValue:n}=e;return"inbox"===n()?"Surat Masuk":"outboxins"===n()&&"Surat Keluar"}},{header:"Retensi Aktif",accessorKey:"thn_aktif"},{header:"Retensi Inaktif",accessorKey:"thn_inaktif"},{header:"Penyusutan",accessorKey:"penyusutan"},{header:"QR Code",accessorKey:"barcode"},{header:"Action",enableSorting:!1,accessorFn:e=>e.NId,cell:e=>{var n,i;let{getValue:l,row:r}=e,s=String(l())||"",d=null===(n=r.original)||void 0===n?void 0:n.NFileDir,o=null===(i=r.original)||void 0===i?void 0:i.FileName_fake;return(0,t.jsxs)(a.Z,{sx:{display:"flex",gap:2,justifyContent:"end"},children:[d&&o&&(0,t.jsx)(Z.Z,{href:"https://sikd.arsip.unram.ac.id/FilesUploaded/".concat(d,"/").concat(o),target:"_blank",size:"small","aria-label":"settings",sx:{color:"text.secondary"},children:(0,t.jsx)(I.Z,{})}),(0,t.jsx)(Z.Z,{onClick:()=>ee(s),size:"small","aria-label":"settings",sx:{color:"text.secondary"},children:(0,t.jsx)(_.Z,{})}),(0,t.jsx)(Z.Z,{onClick:()=>en(r.original),size:"small","aria-label":"settings",sx:{color:"text.secondary"},children:(0,t.jsx)(R.Z,{})})]})}}],[H]);return((0,l.useEffect)(()=>{K.isSuccess&&Y(!1)},[K]),B)?(0,t.jsx)(a.Z,{children:(0,t.jsx)(a.Z,{className:"content-center",children:(0,t.jsxs)(a.Z,{sx:{height:200,p:5,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[(0,t.jsx)(d.Z,{variant:"h5",sx:{mb:1,fontSize:"1.5rem !important"},children:"Data Not Found ⚠️"}),(0,t.jsx)(d.Z,{variant:"body2",children:"We couldn′t find the data you are looking for."})]})})}):(0,t.jsxs)(O,{value:o,index:0,children:[(0,t.jsxs)(s.ZP,{component:f.Z,container:!0,spacing:4,sx:{py:4,pl:2,pr:4},children:[(0,t.jsx)(s.ZP,{item:!0,xs:12,children:(0,t.jsxs)(a.Z,{sx:{display:"flex",gap:2,justifyContent:"space-between",flexWrap:"wrap"},children:[(0,t.jsxs)(a.Z,{sx:{display:"flex",gap:2},children:[(0,t.jsx)(r.Z,{variant:"contained",onClick:()=>c("/app/archive/create"),children:"Tambah Arsip"}),(0,t.jsx)(a.Z,{children:(0,t.jsx)(r.Z,{onClick:()=>{y(!b)},variant:"contained",endIcon:b?(0,t.jsx)(z.Z,{sx:{fontSize:"1.875rem"}}):(0,t.jsx)(N.Z,{sx:{fontSize:"1.875rem"}}),children:"Filter"})})]}),(0,t.jsx)(a.Z,{children:(0,t.jsx)(x.Z,{label:"Search Unit",variant:"outlined",size:"small",onChange:e=>es({...k,search:e.target.value})})})]})}),b&&(0,t.jsx)(s.ZP,{item:!0,xs:12,children:(0,t.jsxs)(a.Z,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[(0,t.jsx)(a.Z,{children:(0,t.jsxs)(j.Z,{fullWidth:!0,children:[(0,t.jsx)(p.Z,{size:"small",children:"Status Arsip"}),(0,t.jsxs)(g.Z,{label:"Status Arsip",defaultValue:"",size:"small",placeholder:"Select Status Arsip",onChange:e=>es({...k,statarsip:e.target.value}),value:k.statarsip||"none",sx:{minWidth:200},children:[(0,t.jsx)(m.Z,{value:"none",children:"Belum Pilih"}),(0,t.jsx)(m.Z,{value:"aktif",children:"Aktif"}),(0,t.jsx)(m.Z,{value:"inaktif",children:"Inaktif"}),(0,t.jsx)(m.Z,{value:"musnah",children:"Musnah"}),(0,t.jsx)(m.Z,{value:"Permanen",children:"Permanen"}),(0,t.jsx)(m.Z,{value:"dinilaikembali",children:"Dinilai Kembali"})]})]})}),(0,t.jsx)(a.Z,{children:(0,t.jsxs)(j.Z,{fullWidth:!0,children:[(0,t.jsx)(p.Z,{size:"small",children:"Akses Publik"}),(0,t.jsxs)(g.Z,{label:"Akses Publik",defaultValue:"",size:"small",placeholder:"Select Akses Publik",onChange:e=>es({...k,apid:e.target.value}),value:k.apid,sx:{minWidth:200},children:[(0,t.jsx)(m.Z,{value:"Z32zwmhpfj.2",children:"Terbuka"}),(0,t.jsx)(m.Z,{value:"Z32zwmhpfj.1",children:"Tertutup"}),(0,t.jsx)(m.Z,{value:"Z32zwmhpfj.3",children:"Berkala"})]})]})})]})}),(0,t.jsxs)(s.ZP,{item:!0,xs:12,sx:{position:"relative"},children:[U&&(0,t.jsx)(a.Z,{sx:{position:"absolute",transform:"translate(-50%, 50%)",top:"30%",left:"50%"},children:(0,t.jsxs)(a.Z,{sx:{display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,t.jsx)(h.Z,{}),(0,t.jsx)(a.Z,{children:"Loading..."})]})}),(0,t.jsx)(w,{tableName:"Arsip",data:(null==$?void 0:$.data)||[],columns:ed,getRowCanExpand:()=>!0,filter:k,handleChangePage:ea,handleChangeRowsPerPage:er,renderSubComponent:e=>{let{row:n}=e;return(0,t.jsx)(L,{row:n})},totalCount:(null==$?void 0:$.total)||0})]})]}),(0,t.jsx)(u.Z,{open:Q,onClose:q,children:(0,t.jsxs)(a.Z,{sx:W.n,children:[(0,t.jsx)(d.Z,{variant:"h6",component:"h2",children:V.$G}),(0,t.jsx)(d.Z,{sx:{mt:2},children:V.iV}),(0,t.jsxs)(a.Z,{sx:{display:"flex",gap:2,mt:2},children:[(0,t.jsx)(r.Z,{variant:"contained",color:"error",onClick:()=>{P({PeopleId:(null==C?void 0:C.PeopleId)||"",NId:null==J?void 0:J.NId,FileDir:null==J?void 0:J.NFileDir})},children:"Yes"}),(0,t.jsx)(r.Z,{variant:"outlined",color:"error",onClick:q,children:"Cancel"})]})]})})]})},L=e=>{let{row:n}=e;return(0,t.jsx)("div",{style:{marginLeft:70},children:(0,t.jsxs)("table",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Asal Surat"}),(0,t.jsx)("td",{children:": "}),(0,t.jsx)("td",{children:n.original.JabatanPengirim?n.original.JabatanPengirim:n.original.Instansipengirim})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Tujuan Surat"}),(0,t.jsx)("td",{children:": "}),(0,t.jsx)("td",{children:n.original.To_Id_Desc})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Kode Klasifikasi"}),(0,t.jsx)("td",{children:": "}),(0,t.jsx)("td",{children:n.original.ClCode})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Pejabat yang bertanda tangan"}),(0,t.jsx)("td",{children:": "}),(0,t.jsx)("td",{children:n.original.pejabatTTD})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Lokasi"}),(0,t.jsx)("td",{children:": "}),(0,t.jsx)("td",{children:n.original.NLokasi})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:"Keterangan"}),(0,t.jsx)("td",{children:": "}),(0,t.jsx)("td",{children:n.original.ket})]})]})})}}},function(e){e.O(0,[6886,135,6572,519,1542,6166,9774,2888,179],function(){return e(e.s=61899)}),_N_E=e.O()}]);