(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6248],{92787:function(l,e,i){"use strict";i.d(e,{$G:function(){return s},GK:function(){return a},cy:function(){return n},iV:function(){return t}});let a="Are you sure want to submit this data?",n=l=>"Error! Can't ".concat(l," data?"),s="Are you sure want to delete this data?",t="This will delete the data permanently and you can not undo this action. Please check carefully."},96268:function(l,e,i){"use strict";i.d(e,{n:function(){return a}});let a={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"1px solid #000",borderRadius:1,boxShadow:24,p:4}},3802:function(l,e,i){"use strict";var a=i(85893),n=i(67294),s=i(11163),t=i(24505);e.Z=l=>{var e;let{children:i}=l,d=null===(e=(0,t.C)(l=>l).auth.data)||void 0===e?void 0:e.data,{push:r}=(0,s.useRouter)();return(0,n.useEffect)(()=>{d||r("/")},[d]),(0,a.jsx)(a.Fragment,{children:i})}},65601:function(l,e,i){"use strict";i.d(e,{Z:function(){return ll}});var a=i(85893),n=i(67294),s=i(11163),t=i(87357),d=i(76624),r=i(44472),u=i(83578),o=i(66242),h=i(69417),x=i(67720),c=i(15861),v=i(44267),m=i(31812),j=i(86886),p=i(22224),Z=i(50135),f=i(47312),g=i(94054),_=i(18360),k=i(45185),b=i(9198),S=i.n(b),P=i(72728),I=i(24505);let z=function(l){var e;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";return null==l?void 0:null===(e=l.filter(l=>l.parent_id===i))||void 0===e?void 0:e.map(e=>{let i=z(l,e.id);return{...e,children:i.length>0?i:[]}})},C=(l,e,i)=>null==l?void 0:l.map(l=>({label:l[e],value:l[i]})),w=l=>"Mohon isi ".concat(l);(0,b.registerLocale)("id",P.Z);let y=(0,n.forwardRef)((l,e)=>(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",...l,inputRef:e,label:"Tanggal Surat",autoComplete:"off"}));var N=l=>{var e,i,n,s,d,r;let{formik:u}=l,{values:o,setFieldValue:h,handleChange:v,handleBlur:m,errors:b,touched:z}=u,w=(0,I.C)(l=>l),N=null===(e=w.option.getOption)||void 0===e?void 0:e.data,W=null===(n=w.user)||void 0===n?void 0:null===(i=n.getUsers)||void 0===i?void 0:i.data,q=C(null==N?void 0:null===(s=N.jenis_naskah)||void 0===s?void 0:s.data,"JenisName","JenisId"),T=C(W,"PeoplePosition","PeopleId");return W?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(j.ZP,{container:!0,spacing:5,children:[(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(c.Z,{variant:"body2",sx:{fontWeight:600},children:"1. Archive"})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,required:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Tipe Surat"}),(0,a.jsxs)(_.Z,{label:"Tipe Surat",defaultValue:"",size:"small",placeholder:"Select Tipe Surat",name:"tipe_surat",onChange:v,onBlur:m,value:o.tipe_surat,required:!0,children:[(0,a.jsx)(p.Z,{value:"inbox",children:"Surat Masuk"}),(0,a.jsx)(p.Z,{value:"outboxins",children:"Surat Keluar"})]}),b.tipe_surat&&z.tipe_surat?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.tipe_surat}):null]})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,required:!0,error:!0,children:[(0,a.jsx)(k.Z,{freeSolo:!0,size:"small",options:q,onChange:(l,e)=>h("jenis_naskah",null==e?void 0:e.value),onBlur:m,value:o.jenis_naskah?null==q?void 0:q.find(l=>l.value===o.jenis_naskah):o.jenis_naskah,renderInput:l=>(0,a.jsx)(Z.Z,{...l,label:"Jenis Naskah",required:!0})}),b.jenis_naskah&&z.jenis_naskah?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.jenis_naskah}):null]})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,required:!0,children:[(0,a.jsx)(S(),{portalId:"root-portal",locale:P.Z,selected:o.tgl_surat,showYearDropdown:!0,showMonthDropdown:!0,dateFormat:"dd-MM-yyyy",placeholderText:"DD-MM-YYYY",name:"tgl_surat",onChange:l=>h("tgl_surat",l),onBlur:m,required:!0,customInput:(0,a.jsx)(y,{})}),b.tgl_surat&&z.tgl_surat?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.tgl_surat}):null]})}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"Nomor Surat",placeholder:"xx/xxxx/xxxx/xxxx",required:!0,name:"nomor_surat",onChange:v,onBlur:m,value:o.nomor_surat}),b.nomor_surat&&z.nomor_surat?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.nomor_surat}):null]}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"QR Code",placeholder:"xxx/UNxx.xx/xxxx",name:"barcode",onChange:v,onBlur:m,value:o.barcode})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"Agenda",placeholder:"1",name:"agenda",onChange:v,onBlur:m,value:o.agenda})}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(Z.Z,{fullWidth:!0,multiline:!0,minRows:3,size:"small",label:"Hal",placeholder:"Archive xxxx",required:!0,name:"hal",onChange:v,onBlur:m,value:o.hal}),b.hal&&z.hal?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.hal}):null]}),(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(x.Z,{sx:{marginBottom:0}})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(c.Z,{variant:"body2",sx:{fontWeight:600},children:"2. Destination"})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,required:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Kategori Asal Surat"}),(0,a.jsxs)(_.Z,{label:"Kategori Asal Surat",defaultValue:"",size:"small",placeholder:"Select Kategori Asal Surat",name:"kategori_pengirim",onChange:l=>{u.setFieldValue("kategori_pengirim",l.target.value),u.setFieldValue("asal_surat","")},onBlur:m,value:o.kategori_pengirim,required:!0,children:[(0,a.jsx)(p.Z,{value:"internal",children:"Internal"}),(0,a.jsx)(p.Z,{value:"external",children:"External"})]})]})}),(null==o?void 0:o.kategori_pengirim)==="internal"&&(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,required:!0,children:[(0,a.jsx)(k.Z,{freeSolo:!0,size:"small",options:T,onChange:(l,e)=>h("asal_surat",null==e?void 0:e.value),onBlur:m,value:o.asal_surat?null==T?void 0:T.find(l=>l.value===o.asal_surat):o.asal_surat,renderInput:l=>(0,a.jsx)(Z.Z,{...l,label:"Asal Surat",required:!0})}),b.asal_surat&&z.asal_surat?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.asal_surat}):null]})}),(null==o?void 0:o.kategori_pengirim)==="external"&&(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"Asal Surat",placeholder:"Department xxxx",required:!0,name:"asal_surat",onChange:v,onBlur:m,value:o.asal_surat}),b.asal_surat&&z.asal_surat?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.asal_surat}):null]}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,required:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Kategori Tujuan Surat"}),(0,a.jsxs)(_.Z,{label:"Kategori Tujuan Surat",defaultValue:"",size:"small",placeholder:"Select Kategori Tujuan Surat",name:"kategori_penerima",onChange:l=>{u.setFieldValue("kategori_penerima",l.target.value),u.setFieldValue("tujuan_surat",[])},onBlur:m,value:o.kategori_penerima,required:!0,children:[(0,a.jsx)(p.Z,{value:"internal",children:"Internal"}),(0,a.jsx)(p.Z,{value:"external",children:"External"})]})]})}),"internal"===o.kategori_penerima&&(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,required:!0,children:[(0,a.jsx)(k.Z,{freeSolo:!0,multiple:!0,size:"small",options:T,onChange:(l,e)=>h("tujuan_surat",null==e?void 0:e.map(l=>null==l?void 0:l.value)),onBlur:m,value:o.tujuan_surat?null==T?void 0:T.filter(l=>{var e;return null==o?void 0:null===(e=o.tujuan_surat)||void 0===e?void 0:e.find(e=>e===l.value)}):o.tujuan_surat,renderInput:l=>(0,a.jsx)(Z.Z,{...l,label:"Tujuan Surat",required:!0})}),b.tujuan_surat&&z.tujuan_surat?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.tujuan_surat}):null]})}),"external"===o.kategori_penerima&&(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"Tujuan Surat",placeholder:"Department xxxx",required:!0,name:"tujuan_surat",onChange:l=>u.setFieldValue("tujuan_surat",[l.target.value]),onBlur:m,value:o.tujuan_surat[0]}),b.tujuan_surat&&z.tujuan_surat?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.tujuan_surat}):null]}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"Pejabat yang bertanda tangan",placeholder:"John Doe xxxx",name:"pejabat_ttd",onChange:v,onBlur:m,value:o.pejabat_ttd})}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsxs)(t.Z,{sx:{display:"flex",gap:2},children:[(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"Jumlah Unit",placeholder:"1",name:"jumlah",onChange:v,onBlur:m,value:o.jumlah}),(0,a.jsxs)(g.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Satuan Unit"}),(0,a.jsx)(_.Z,{label:"Satuan Unit",defaultValue:"",size:"small",placeholder:"Select Satuan Unit",name:"satuan_unit",onChange:v,onBlur:m,value:o.satuan_unit,required:!0,children:null==N?void 0:null===(r=N.satuan_unit)||void 0===r?void 0:null===(d=r.data)||void 0===d?void 0:d.map(l=>(0,a.jsx)(p.Z,{value:null==l?void 0:l.MeasureUnitId,children:null==l?void 0:l.MeasureUnitName},null==l?void 0:l.MeasureUnitId))})]})]}),b.jumlah&&z.jumlah?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.jumlah}):null]}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(Z.Z,{fullWidth:!0,multiline:!0,minRows:3,size:"small",label:"Lokasi",placeholder:"File Cabinet xxxx",required:!0,name:"lokasi_arsip",onChange:v,onBlur:m,value:o.lokasi_arsip}),b.lokasi_arsip&&z.lokasi_arsip?(0,a.jsx)("div",{style:{color:"red",fontSize:11},children:b.lokasi_arsip}):null]}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsx)(Z.Z,{fullWidth:!0,multiline:!0,minRows:3,size:"small",label:"Keterangan",placeholder:"Esc xxxx",name:"ket",onChange:v,onBlur:m,value:o.ket})})]})}):(0,a.jsx)(a.Fragment,{children:"Tunggu Formulir"})},W=i(90948),q=i(54141),T=i(10492),B=i(79947),A=i(40476);let V=(0,W.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});var F=l=>{var e,i,s,t,d,r,u,o,v,m,Z,k,b,S,P,z,C,w,y,N,W,F,R,U;let{formik:D}=l,{values:K,setFieldValue:M,handleChange:L,handleBlur:E}=D,[G,J]=(0,n.useState)(),O=null===(e=(0,I.C)(l=>l).option.getOption)||void 0===e?void 0:e.data,Y=(0,T.defaultLayoutPlugin)();async function H(l){J(new Uint8Array(await l.arrayBuffer()))}return(0,n.useEffect)(()=>{D.values.file&&H(D.values.file)},[D.values.file]),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(j.ZP,{container:!0,spacing:5,children:[(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(c.Z,{variant:"body2",sx:{fontWeight:600},children:"3. Archive Details"})}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsxs)(h.Z,{component:"label",variant:"contained",startIcon:(0,a.jsx)(B.Z,{}),children:["Upload file",(0,a.jsx)(V,{type:"file",name:"upload",onChange:l=>{M("file",l.target.files?l.target.files[0]:"")},accept:"".concat(null==O?void 0:null===(t=O.file_allowed)||void 0===t?void 0:null===(s=t.data)||void 0===s?void 0:null===(i=s.map(l=>null==l?void 0:l.TipeExt))||void 0===i?void 0:i.join(","))})]}),(0,a.jsx)(A.Z,{sx:{ml:2},children:null==K?void 0:null===(d=K.file)||void 0===d?void 0:d.name})]}),(null==K?void 0:null===(r=K.file)||void 0===r?void 0:r.name)&&(null===(u=function(l){let e=l.lastIndexOf(".");return -1===e?{name:l,extension:""}:{name:l.substring(0,e),extension:l.substring(e+1)}}(null==K?void 0:null===(o=K.file)||void 0===o?void 0:o.name))||void 0===u?void 0:u.extension)==="pdf"&&G&&(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(q.Worker,{workerUrl:"https://unpkg.com/pdfjs-dist@3.4.120/build/pdf.worker.js",children:(0,a.jsx)("div",{style:{height:"300px",marginLeft:"auto",marginRight:"auto"},children:(0,a.jsx)(q.Viewer,{fileUrl:G,plugins:[Y]})})})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(x.Z,{sx:{marginBottom:0}})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(c.Z,{variant:"body2",sx:{fontWeight:600},children:"4. Advanced Details"})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Kategori Arsip"}),(0,a.jsx)(_.Z,{label:"Kategori Arsip",defaultValue:"",size:"small",placeholder:"Pilih Kategori Arsip",name:"kategori_arsip",onChange:L,onBlur:E,value:K.kategori_arsip,required:!0,children:null==O?void 0:null===(m=O.kategori_arsip)||void 0===m?void 0:null===(v=m.data)||void 0===v?void 0:v.map(l=>(0,a.jsx)(p.Z,{value:null==l?void 0:l.KatId,children:null==l?void 0:l.KatName},null==l?void 0:l.KatId))})]})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Sifat Surat"}),(0,a.jsx)(_.Z,{label:"Sifat Surat",defaultValue:"",size:"small",placeholder:"Pilih Sifat Surat",name:"sifat",onChange:L,onBlur:E,value:K.sifat,required:!0,children:null==O?void 0:null===(k=O.sifat)||void 0===k?void 0:null===(Z=k.data)||void 0===Z?void 0:Z.map(l=>(0,a.jsx)(p.Z,{value:null==l?void 0:l.SifatId,children:null==l?void 0:l.SifatName},null==l?void 0:l.SifatId))})]})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Tingkat Perkembangan Surat"}),(0,a.jsx)(_.Z,{label:"Tingkat Perkembangan Surat",defaultValue:"",size:"small",placeholder:"Pilih Tingkat Perkembangan Surat",name:"tingkat_perkembangan",onChange:L,onBlur:E,value:K.tingkat_perkembangan,required:!0,children:null==O?void 0:null===(S=O.tingkat_perkembangan)||void 0===S?void 0:null===(b=S.data)||void 0===b?void 0:b.map(l=>(0,a.jsx)(p.Z,{value:null==l?void 0:l.TPId,children:null==l?void 0:l.TPName},null==l?void 0:l.TPId))})]})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Urgensi Surat"}),(0,a.jsx)(_.Z,{label:"Urgensi Surat",defaultValue:"",size:"small",placeholder:"Pilih Urgensi Surat",name:"urgensi",onChange:L,onBlur:E,value:K.urgensi,required:!0,children:null==O?void 0:null===(z=O.urgensi)||void 0===z?void 0:null===(P=z.data)||void 0===P?void 0:P.map(l=>(0,a.jsx)(p.Z,{value:null==l?void 0:l.UrgensiId,children:null==l?void 0:l.UrgensiName},null==l?void 0:l.UrgensiId))})]})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Media Surat"}),(0,a.jsx)(_.Z,{label:"Media Surat",defaultValue:"",size:"small",placeholder:"Pilih Media Surat",name:"media",onChange:L,onBlur:E,value:K.media,required:!0,children:null==O?void 0:null===(w=O.media)||void 0===w?void 0:null===(C=w.data)||void 0===C?void 0:C.map(l=>(0,a.jsx)(p.Z,{value:null==l?void 0:l.MediaId,children:null==l?void 0:l.MediaName},null==l?void 0:l.MediaId))})]})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Vital Surat"}),(0,a.jsx)(_.Z,{label:"Vital Surat",defaultValue:"",size:"small",placeholder:"Pilih Vital Surat",name:"vital",onChange:L,onBlur:E,value:K.vital,required:!0,children:null==O?void 0:null===(N=O.vital)||void 0===N?void 0:null===(y=N.data)||void 0===y?void 0:y.map(l=>(0,a.jsx)(p.Z,{value:null==l?void 0:l.VitId,children:null==l?void 0:l.VitName},null==l?void 0:l.VitId))})]})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Bahasa Surat"}),(0,a.jsx)(_.Z,{label:"Bahasa Surat",defaultValue:"",size:"small",placeholder:"Pilih Bahasa Surat",name:"bahasa",onChange:L,onBlur:E,value:K.bahasa,required:!0,children:null==O?void 0:null===(F=O.bahasa)||void 0===F?void 0:null===(W=F.data)||void 0===W?void 0:W.map(l=>(0,a.jsx)(p.Z,{value:null==l?void 0:l.LangId,children:null==l?void 0:l.LangName},null==l?void 0:l.LangId))})]})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,sm:6,children:(0,a.jsxs)(g.Z,{fullWidth:!0,children:[(0,a.jsx)(f.Z,{size:"small",children:"Akses Publik Surat"}),(0,a.jsx)(_.Z,{label:"Akses Publik Surat",defaultValue:"",size:"small",placeholder:"Pilih Akses Publik Surat",name:"akses_publik",onChange:L,onBlur:E,value:K.akses_publik,required:!0,children:null==O?void 0:null===(U=O.akses_publik)||void 0===U?void 0:null===(R=U.data)||void 0===R?void 0:R.map(l=>(0,a.jsx)(p.Z,{value:null==l?void 0:l.APId,children:null==l?void 0:l.APName},null==l?void 0:l.APId))})]})})]})})},R=i(22875),U=i(5368),D=i(94519),K=i(93500),M=i(70090);(0,W.ZP)("input")({clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:1,overflow:"hidden",position:"absolute",bottom:0,left:0,whiteSpace:"nowrap",width:1});var L=l=>{var e,i,n,s,d,r;let{formik:u}=l,{values:o,setFieldValue:h,handleChange:v,handleBlur:m}=u,p=(0,I.C)(l=>l),f=null===(e=p.option.getOption)||void 0===e?void 0:e.data,_=null===(i=p.classification.getClassification)||void 0===i?void 0:i.data,{data:b}=(0,D.j)({},{skip:!!(null===(s=p.classification)||void 0===s?void 0:null===(n=s.getClassification)||void 0===n?void 0:n.data)}),S=z(_),P=null==_?void 0:_.find(l=>(null==l?void 0:l.id)===o.kode_surat),w=C(_,"name","id"),y=null==f?void 0:null===(r=f.penyusutan)||void 0===r?void 0:null===(d=r.data)||void 0===d?void 0:d.find(l=>l.SusutId===(null==P?void 0:P.susut_id)),N=l=>null==l?void 0:l.map(l=>(0,a.jsx)(M.k,{nodeId:l.id,label:l.name,children:l.children.length>0&&N(l.children)},l.id));return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(j.ZP,{container:!0,spacing:5,children:[(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(c.Z,{variant:"body2",sx:{fontWeight:600},children:"5. Detail Klasifikasi Arsip"})}),_&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(t.Z,{sx:{maxHeight:500,overflowY:"auto"},children:(0,a.jsx)(K.L,{"aria-label":"file system navigator",defaultCollapseIcon:(0,a.jsx)(R.Z,{}),defaultExpandIcon:(0,a.jsx)(U.Z,{}),onNodeSelect:(l,e)=>{h("kode_surat",e),h("susut",null==P?void 0:P.susut_id)},selected:o.selected,children:N(S||[])})})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(g.Z,{fullWidth:!0,children:(0,a.jsx)(k.Z,{freeSolo:!0,size:"small",options:w,onChange:(l,e)=>{h("kode_surat",null==e?void 0:e.value),h("susut",null==P?void 0:P.susut_id)},renderInput:l=>(0,a.jsx)(Z.Z,{...l,label:"Klasifikasi Arsip",required:!0})})})})]}),(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(x.Z,{sx:{marginBottom:0}})}),(0,a.jsx)(j.ZP,{item:!0,xs:12,children:(0,a.jsx)(c.Z,{variant:"body2",sx:{fontWeight:600},children:"6. Detail Pilihan"})}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(A.Z,{children:"Nama Klasifikasi"}),(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:(null==P?void 0:P.name)||"xx - xxxx",disabled:!0})]}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(A.Z,{children:"Tahun Aktif"}),(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"".concat((null==P?void 0:P.thn_aktif)||"x"," tahun"),disabled:!0})]}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(A.Z,{children:"Tahun Inaktif"}),(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"".concat((null==P?void 0:P.thn_inaktif)||"x"," tahun"),disabled:!0})]}),(0,a.jsxs)(j.ZP,{item:!0,xs:12,sm:6,children:[(0,a.jsx)(A.Z,{children:"Penyusutan"}),(0,a.jsx)(Z.Z,{fullWidth:!0,size:"small",label:"".concat((null==y?void 0:y.SusutName)||"xxxx"),disabled:!0})]})]})})},E=i(82175);let G=(l,e)=>{var i;return{PeopleId:(null==l?void 0:l.PeopleId)||"",tipe_surat:(null==e?void 0:e.NTipe)||"inbox",NId:(null==e?void 0:e.NId)||"",GIR_Id:(null==e?void 0:e.GIR_Id)||"",NTglReg:(null==e?void 0:e.NTglReg)||"",PrimaryRoleId:(null==l?void 0:l.PrimaryRoleId)||"",nomor_surat:(null==e?void 0:e.Nomor)||"",kode_surat:(null==e?void 0:e.ClId)||"",barcode:(null==e?void 0:e.barcode)||"",hal:(null==e?void 0:e.Hal)||"",agenda:(null==e?void 0:e.NAgenda)||"",jenis_naskah:(null==e?void 0:e.JenisId)||"",tingkat_perkembangan:(null==e?void 0:e.TPId)||"Z32zwmhpfj.1",akses_publik:(null==e?void 0:e.APId)||"Z32zwmhpfj.1",kategori_arsip:(null==e?void 0:e.KatId)||"Z32zwmhpfj.2",sifat:(null==e?void 0:e.SifatId)||"Z32zwmhpfj.1",urgensi:(null==e?void 0:e.UrgensiId)||"Z32zwmhpfj.1",media:(null==e?void 0:e.MediaId)||"Z32zwmhpfj.1",vital:(null==e?void 0:e.VitId)||"Z32zwmhpfj.1",jumlah:(null==e?void 0:e.NJml)||"",bahasa:(null==e?void 0:e.LangId)||"Z32zwmhpfj.1",satuan_unit:(null==e?void 0:e.MeasureId)||"Z32zwmhpfj.1",kategori_pengirim:(null==e?void 0:e.Pengirim)||"internal",kategori_penerima:(null==e?void 0:e.kat_penerima)||"internal",asal_surat:(null==e?void 0:e.Namapengirim)===""?null==e?void 0:e.Instansipengirim:(null==e?void 0:e.Namapengirim)||"",tujuan_surat:(null==e?void 0:e.kat_penerima)==="external"?null==e?void 0:e.To_Id_Desc:(null==e?void 0:null===(i=e.toId)||void 0===i?void 0:i.split(","))||[],pejabat_ttd:(null==e?void 0:e.pejabatTTD)||"",tgl_surat:(null==e?void 0:e.Tgl)?new Date(null==e?void 0:e.Tgl):new Date,lokasi_arsip:(null==e?void 0:e.NLokasi)||"",berkas:(null==e?void 0:e.BerkasId)||"1",ket:(null==e?void 0:e.ket)||"",path:(null==e?void 0:e.NFileDir)||"",file:""}};var J=i(59791),O=i(92787),Y=i(96268),H=i(25841),Q=i(16310);let X={tipe_surat:Q.Z_().required(w("Tipe Surat")),jenis_naskah:Q.Z_().required(w("Jenis Naskah")),tgl_surat:Q.Z_().required(w("Tanggal Surat")),nomor_surat:Q.Z_().required(w("Nomor Surat")),hal:Q.Z_().required(w("Hal")),asal_surat:Q.Z_().required(w("Asal Surat")),jumlah:Q.Z_().required(w("Jumlah Arsip")),lokasi_arsip:Q.Z_().required(w("Lokasi Arsip")),tujuan_surat:Q.IX().of(Q.Z_().required(w("Tujuan Surat"))).min(1,"Minimal 1 Tujuan Surat")},$=["General","Advanced","Classification"];var ll=()=>{var l,e;let{query:i,push:j}=(0,s.useRouter)(),{id:p}=i,Z=null===(e=(0,I.C)(l=>l).auth)||void 0===e?void 0:null===(l=e.data)||void 0===l?void 0:l.data,{data:f}=(0,H.r8)({NId:p},{skip:!p}),[g,_]=(0,H.JU)({}),[k,b]=(0,H.I4)({}),[S,P]=(0,H.sm)({}),[z,C]=(0,n.useState)(!1),[w,y]=(0,n.useState)(!1),[W,q]=(0,n.useState)(!1),[T,B]=(0,n.useState)(0),[A,V]=(0,n.useState)(new Set),R=l=>1===l,U=l=>A.has(l),D=(0,E.TA)({initialValues:G(Z),validationSchema:Q.Ry(X),onSubmit:async l=>{var e,i,a,n;C(!0);let s={...l,tgl_surat:null===(i=l.tgl_surat)||void 0===i?void 0:null===(e=i.toISOString())||void 0===e?void 0:e.split("T")[0]},t=new FormData;t.append("sendfile",l.file),t.append("aksi",p?"edit":"add"),t.append("key","Z32zwmhpfj"),t.append("NId",l.NId),t.append("GIR_Id",l.GIR_Id),t.append("NTipe",l.tipe_surat),t.append("PeopleId",l.PeopleId),t.append("PrimaryRoleId",l.PrimaryRoleId),(null==f?void 0:f.data[0])&&t.append("LastFile",null==f?void 0:f.data[0].FileName_fake);let{data:d}=p?await k(s):await g(s);(null==d?void 0:d.status)===200&&(t.append("NId",null==d?void 0:null===(a=d.data)||void 0===a?void 0:a.NId),t.append("GIR_Id",null==d?void 0:null===(n=d.data)||void 0===n?void 0:n.GIR_Id),await S(t)),C(!1)}});return(0,n.useEffect)(()=>{var l,e;_.isSuccess&&(y(!1),(null===(l=_.data)||void 0===l?void 0:l.status)===200?!1===z&&j("/app/archive"):q(!0)),b.isSuccess&&(y(!1),(null===(e=b.data)||void 0===e?void 0:e.status)===200?!1===z&&j("/app/archive"):q(!0))},[_,b,z]),(0,n.useEffect)(()=>{p&&(null==f?void 0:f.data)&&D.setValues(G(Z,null==f?void 0:f.data[0]))},[p,null==f?void 0:f.data]),(0,a.jsx)(o.Z,{children:(0,a.jsxs)("form",{onSubmit:l=>l.preventDefault(),children:[(0,a.jsxs)(v.Z,{children:[(0,a.jsx)(d.Z,{activeStep:T,children:$.map((l,e)=>{let i={},n={};return R(e)&&(n.optional=(0,a.jsx)(c.Z,{variant:"caption",children:"Optional"})),U(e)&&(i.completed=!1),(0,a.jsx)(r.Z,{...i,children:(0,a.jsx)(u.Z,{...n,children:l})},l)})}),0===T&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(N,{formik:D})}),1===T&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(F,{formik:D})}),2===T&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(L,{formik:D})})]}),(0,a.jsx)(x.Z,{sx:{margin:0}}),(0,a.jsxs)(t.Z,{sx:{display:"flex",flexDirection:"row",p:2,justifyContent:"space-between"},children:[(0,a.jsx)(h.Z,{color:"inherit",disabled:0===T,onClick:()=>{B(l=>l-1)},sx:{mr:1},children:"Back"}),(0,a.jsx)(t.Z,{sx:{flex:"1 1 auto"}}),R(T)&&(0,a.jsx)(h.Z,{color:"inherit",onClick:()=>{if(!R(T))throw Error("You can't skip a step that isn't optional.");B(l=>l+1),V(l=>{let e=new Set(l.values());return e.add(T),e})},sx:{mr:1},children:"Skip"}),(0,a.jsx)(h.Z,{onClick:()=>{let l=A;U(T)&&(l=new Set(l.values())).delete(T),T<=1?(B(l=>l+1),V(l)):y(!w)},children:T===$.length-1?"Finish":"Next"})]}),(0,a.jsx)(J.Z,{open:w,onClose:()=>y(!w),children:(0,a.jsxs)(t.Z,{sx:Y.n,children:[(0,a.jsx)(c.Z,{variant:"h6",component:"h2",children:O.GK}),(0,a.jsxs)(t.Z,{sx:{display:"flex",gap:2,mt:2},children:[(0,a.jsx)(m.Z,{loading:_.isLoading||b.isLoading,variant:"contained",onClick:()=>{D.submitForm(),B(0)},children:"Submit"}),(0,a.jsx)(m.Z,{loading:_.isLoading||b.isLoading,variant:"outlined",onClick:()=>y(!w),children:"Cancel"})]})]})}),(0,a.jsx)(J.Z,{open:W,onClose:()=>q(!W),children:(0,a.jsxs)(t.Z,{sx:Y.n,children:[(0,a.jsx)(c.Z,{variant:"h6",component:"h2",children:(0,O.cy)(p?"Edit":"Add")}),(0,a.jsx)(t.Z,{sx:{display:"flex",gap:2,mt:2},children:(0,a.jsx)(h.Z,{variant:"contained",color:"error",onClick:()=>q(!W),children:"Ok"})})]})})]})})}},93414:function(){},70172:function(){},2001:function(){},33779:function(){},82258:function(){}}]);